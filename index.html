<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>STARBORD</title>
  <link rel="stylesheet" href="/assets/style/style.css">
  <link rel="icon" type="image/png" href="/assets/img/favicon.png">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap" rel="stylesheet">
</head>


<body>
  <div id="app"></div>
  <script type="module" src="/src/main.js"></script>
</body>
</html>
    <div id="grid" class="catalog"></div>
</section>
 





  <!-- SCRIPT : génération catalogue -->
  <script>
    const comics = [
      { id: 'bd1', title: "Détenu 278", author: "FÉNIX", chapters: 1, cover: "/assets/img/cover/detenu278-cover.jpg" },
      { id: 'bd2', title: "Figé dans l'acier", author: "FÉNIX", chapters: 1, cover: "/assets/img/cover/fige_dans_lacier-cover.jpg" },
    ];

    const grid = document.getElementById('grid');

    function makeCard(c) {
      const a = document.createElement('a');
      a.className = 'card-link';
      a.href = `chapitre.html?comic=${encodeURIComponent(c.id)}`;
      a.setAttribute('title', `Ouvrir ${c.title}`);

      const card = document.createElement('article');
      card.className = 'card';

      const img = document.createElement('img');
      img.className = 'cover-img';
      img.src = c.cover;
      img.alt = `Couverture ${c.title}`;
      img.width = 155;
      img.height = 180;
      img.loading = 'lazy';

      const meta = document.createElement('div');
      meta.className = 'meta';
      meta.innerHTML = `
        <h3>${c.title}</h3>
        <p class="muted">${c.author} • ${c.chapters} chap.</p>
      `;

      const actions = document.createElement('div');
      actions.className = 'actions';

      const star = document.createElement('button');
      star.className = 'fav';
      star.innerHTML = '☆';
      star.title = 'Ajouter aux favoris';
      star.addEventListener('click', (e) => {
        e.preventDefault();
        e.stopPropagation();
        star.classList.toggle('active');
        star.innerHTML = star.classList.contains('active') ? '★' : '☆';
      });

      actions.appendChild(star);

      card.appendChild(img);
      card.appendChild(meta);
      card.appendChild(actions);
      a.appendChild(card);

      return a;
    }

    function renderGrid(list) {
      grid.innerHTML = '';
      list.forEach(c => grid.appendChild(makeCard(c)));
    }

    renderGrid(comics);

    document.getElementById('searchInput').addEventListener('input', (e) => {
      const q = e.target.value.toLowerCase().trim();
      const filtered = comics.filter(c =>
        (c.title + ' ' + c.author).toLowerCase().includes(q)
      );
      renderGrid(filtered);
    });

    /* === CARROUSEL HERO === */
    let currentSlide = 0;
    const slides = document.querySelectorAll('.carousel-slide');
    const indicators = document.querySelectorAll('.carousel-indicators .indicator');
    const textContent = document.querySelector('.text-content');
    const totalSlides = slides.length;

    function showSlide(newIndex) {
      const oldIndex = currentSlide;
      
      // Enlever toutes les classes des slides
      slides.forEach(slide => {
        slide.classList.remove('active');
        slide.classList.remove('prev');
      });
      
      // Enlever la classe active des indicateurs (si présents)
      if (indicators.length > 0) {
        indicators.forEach(ind => ind.classList.remove('active'));
        slides[newIndex].classList.add('active');
        indicators[newIndex].classList.add('active');
      } else {
        // Si pas d'indicateurs visibles, ajouter juste la classe active au slide
        slides[newIndex].classList.add('active');
      }

      // Marquer la slide précédente pour l'animation de sortie
      if (oldIndex !== newIndex) {
        slides[oldIndex].classList.add('prev');
      }

      // Gérer la visibilité du texte (seulement sur le premier slide)
      if (newIndex === 0) {
        textContent.classList.add('active');
      } else {
        textContent.classList.remove('active');
      }
      
      // Mettre à jour l'index courant
      currentSlide = newIndex;
    }

    function nextSlide() {
      const newIndex = (currentSlide + 1) % totalSlides;
      showSlide(newIndex);
    }

    // Initialiser le premier slide
    showSlide(0);

    // Auto-play : change de slide toutes les 5 secondes
    setInterval(nextSlide, 5000);

    // Clic sur les indicateurs (si présents)
    if (indicators.length > 0) {
      indicators.forEach((indicator, index) => {
        indicator.addEventListener('click', () => {
          showSlide(index);
        });
      });
    }

    // Bouton scroll vers la boutique
    const scrollBtn = document.querySelector('.scroll-to-shop');
    scrollBtn.addEventListener('click', () => {
      const shopSection = document.querySelector('#shop');
      shopSection.scrollIntoView({ behavior: 'smooth' });
    });
  </script>

</body> 
</html>

